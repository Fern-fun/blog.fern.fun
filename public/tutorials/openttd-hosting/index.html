<!DOCTYPE html>
<html lang="en"><meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8"/>
<meta name="description" content="OpenTTD Installation # As root, from the /root directory curl -O https://cdn.openttd.org/openttd-releases/13.0/openttd-13.0-linux-generic-amd64.tar.xz curl -O https://cdn.openttd.org/opengfx-releases/7.1/opengfx-7.1-all.zip unzip opengfx-7.1-all.zip cd /opt tar xf /root/openttd-13.0-linux-generic-amd64.tar.xz mv openttd-13.0-linux-generic-amd64 openttd cp /root/opengfx-7.1.tar /opt/openttd/baseset User Creation OpenTTD stores add-ons, saves, etc. in the user&rsquo;s folder, and running the server as the root user is not a good idea.
useradd -m -d /srv/openttd -s /bin/bash openttd First Run During the first run, OpenTTD will generate the ~/.config/openttd and ~/.">


  <title>OpenTTD hosting | Fern.Fun Blog</title>




  <link rel="stylesheet" href="/css/style.min.0ea6c29e7f709a7d516d8048552056b372bf541f174c4325e1d3e76992e4b47d.css" integrity="sha256-DqbCnn9wmn1RbYBIVSBWs3K/VB8XTEMl4dPnaZLktH0=" crossorigin="anonymous">
<body>
        <div class="container"><nav class="nav">
    <input type="checkbox" id="toggle-menu" />

    <div class="nav__buttons">
        <a href="/" class="nav__title">[Fern OS] $</a>
        <label class="nav__menu-toggle" for="toggle-menu" >
            <div class="nav__hamburger-bar-1"></div> 
            <div class="nav__hamburger-bar-2"></div> 
            <div class="nav__hamburger-bar-3"></div> 
        </label>
    </div>
    
    <div class="nav__links">


            
                <a href="/journal/" class="nav__link">./Journal</a>
            
                <a href="/tutorials/" class="nav__link">./Tutorials</a>
            
    
            
                
            
                
            
                
            
                
                    <a href="/about-us/" class="nav__link">./About us</a>
    
                
            
    </div>

    <div class="nav__langs">
        
            <a class="nav__lang" href="/pl/poradniki/hostowanie-openttd/">pl</a>
        

        <span class="nav__lang nav__lang--active">en</span>
    </div>
</nav> <main class="content">

<div>
    <div>Date: 30 Jun 2023</div>
    <div>
    
    
        Author:
        
        <a href="/author/bartlomiej-kudzia/">Bart≈Çomiej Kudzia</a>
    
</div>

    <div>
    
    
        Tags:
        
        <a href="/tag/linux/">linux</a>, 
        <a href="/tag/openttd/">openttd</a>, 
        <a href="/tag/games/">games</a>, 
        <a href="/tag/hosting/">hosting</a>, 
        <a href="/tag/technical/">technical</a>
    
</div>

</div>

<h1>OpenTTD hosting</h1>

<h2 id="openttd-installation">OpenTTD Installation</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># As root, from the /root directory</span>
</span></span><span style="display:flex;"><span>curl -O https://cdn.openttd.org/openttd-releases/13.0/openttd-13.0-linux-generic-amd64.tar.xz
</span></span><span style="display:flex;"><span>curl -O https://cdn.openttd.org/opengfx-releases/7.1/opengfx-7.1-all.zip
</span></span><span style="display:flex;"><span>unzip opengfx-7.1-all.zip
</span></span><span style="display:flex;"><span>cd /opt
</span></span><span style="display:flex;"><span>tar xf /root/openttd-13.0-linux-generic-amd64.tar.xz
</span></span><span style="display:flex;"><span>mv openttd-13.0-linux-generic-amd64 openttd
</span></span><span style="display:flex;"><span>cp /root/opengfx-7.1.tar /opt/openttd/baseset
</span></span></code></pre></div><h2 id="user-creation">User Creation</h2>
<p>OpenTTD stores add-ons, saves, etc. in the user&rsquo;s folder, and running the server as the root user is not a good idea.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>useradd -m -d /srv/openttd -s /bin/bash openttd
</span></span></code></pre></div><h2 id="first-run">First Run</h2>
<p>During the first run, OpenTTD will generate the <code>~/.config/openttd</code> and <code>~/.local/share/openttd</code> folders.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su openttd
</span></span><span style="display:flex;"><span>/opt/openttd/openttd -D
</span></span></code></pre></div><p>After starting the server, you can immediately configure some settings.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>server_name FernTTD
</span></span><span style="display:flex;"><span>name FernTTD
</span></span><span style="display:flex;"><span>rcon_pw j3b4cp1s
</span></span><span style="display:flex;"><span>setting server_game_type public
</span></span></code></pre></div><h2 id="scenario-and-add-ons-installation">Scenario and Add-ons Installation</h2>
<p>Place the <code>init.sav</code> file in the <code>/srv/openttd/.local/share/openttd/save</code> directory. Remember to change the permissions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chown openttd:openttd /srv/openttd/.local/share/openttd/save/init.sav
</span></span></code></pre></div><p>This file contains the initial game state, so you need to make a copy of it. Make sure to execute the commands as the <code>openttd</code> user!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cp /srv/openttd/.local/share/openttd/save/init.sav /srv/openttd/.local/share/openttd/save/main.sav
</span></span></code></pre></div><p>Upload the <code>newgrf.tar.xz</code> file to the <code>/srv/openttd</code> directory and extract it to the <code>.local/share/openttd/newgrf</code> folder:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ~/.local/share/openttd/newgrf
</span></span><span style="display:flex;"><span>tar xvf ~/newgrf.tar.xz
</span></span></code></pre></div><p>Now, you need to start the server and install the required add-ons.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/opt/openttd/openttd -D
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rescan_newgrf
</span></span><span style="display:flex;"><span>content update
</span></span><span style="display:flex;"><span>content <span style="color:#66d9ef">select</span> <span style="color:#ae81ff">16509003</span>
</span></span><span style="display:flex;"><span>content download
</span></span></code></pre></div><p>To check if everything is working, you can try running the server with the save file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/opt/openttd/openttd -D -g save/main.sav
</span></span></code></pre></div><h2 id="scripts">Scripts</h2>
<p>In the home directory of the <code>openttd</code> user, create a script called <code>launch_openttd.sh</code> and paste the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Change to /srv/openttd</span>
</span></span><span style="display:flex;"><span>cd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>save_dir<span style="color:#f92672">=</span>.local/share/openttd/save
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If main.sav doesn&#39;t exist, make a copy of init.sav</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[[</span> -f $save_dir/main.sav <span style="color:#f92672">]]</span> <span style="color:#f92672">||</span> cp -v $save_dir/init.sav $save_dir/save/main.sav
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>recent_autosave<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>ls -t $save_dir/autosave | head -n1<span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If there&#39;s an autosave</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> ! <span style="color:#f92672">[[</span> -z $recent_autosave <span style="color:#f92672">]]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If the autosave is newer than main.sav, replace it</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">[[</span> $save_dir/autosave/$recent_autosave -nt $save_dir/main.sav <span style="color:#f92672">]]</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>                <span style="color:#f92672">&amp;&amp;</span> cp -v $save_dir/autosave/$recent_autosave $save_dir/main.sav
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Start the server</span>
</span></span><span style="display:flex;"><span>/opt/openttd/openttd -D -g save/main.sav &gt;&gt;server.log
</span></span></code></pre></div><p>Create another script called <code>restart_game.sh</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>cp -v $save_dir/init.sav $save_dir/save/main.sav
</span></span></code></pre></div><p>The first script copies the latest autosave to the <code>main.sav</code> file and starts the server. The second script removes the <code>main.sav</code> file so that it will be created again when the server starts. Make sure to set the appropriate permissions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod u+x launch_openttd.sh
</span></span><span style="display:flex;"><span>chmod u+x restart_game.sh
</span></span></code></pre></div><h2 id="service-configuration">Service Configuration</h2>
<p>Create a file named <code>/etc/systemd/system/openttd.service</code> and paste the following content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cfg" data-lang="cfg"><span style="display:flex;"><span><span style="color:#66d9ef">[Unit]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Description</span><span style="color:#f92672">=</span><span style="color:#e6db74">OpenTTD Dedicated Server</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">After</span><span style="color:#f92672">=</span><span style="color:#e6db74">local-fs.target network.target</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[Service]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WorkingDirectory</span><span style="color:#f92672">=</span><span style="color:#e6db74">/srv/openttd</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">User</span><span style="color:#f92672">=</span><span style="color:#e6db74">openttd</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Group</span><span style="color:#f92672">=</span><span style="color:#e6db74">openttd</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ExecStart</span><span style="color:#f92672">=</span><span style="color:#e6db74">/bin/bash /srv/openttd/launch_openttd.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Type</span><span style="color:#f92672">=</span><span style="color:#e6db74">simple</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[Install]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">WantedBy</span><span style="color:#f92672">=</span><span style="color:#e6db74">multi-user.target</span>
</span></span></code></pre></div><p>Then refresh systemd:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl daemon-reload
</span></span></code></pre></div><p>This allows you to manage the server using standard commands:</p>
<pre tabindex="0"><code>systemctl start openttd
systemctl stop openttd
systemctl enable openttd
systemctl disable openttd
systemctl status openttd
</code></pre><h2 id="ports">Ports</h2>
<p>OpenTTD uses ports <code>3978</code> &amp; <code>3979</code> (TCP and UDP).</p>
<h2 id="joining-the-game">Joining the Game</h2>
<p>After connecting, if the game is paused, you can unpause it using the command: <code>rcon j3b4cp1s unpause</code></p>



<article class="ls">
    <p class="ls__command">
        <span class="ls__prompt">[Fern]</span> $ ls Tutorials | head -n5
    </p>

    
        <div class="ls__line">
            <span class="mobile-hide">
    -rw-rw-r-- 1 fern fern 
    444 
    
    Jun 30 2023 
    
</span>
<a href="/tutorials/openttd-hosting/">OpenTTD hosting</a>
        </div>
    
</article>


            </main></div>
    </body>
</html>
